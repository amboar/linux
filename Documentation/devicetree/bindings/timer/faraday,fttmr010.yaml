# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/timer/faraday,fttmr010.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Faraday Technology timer

description: |
  This timer is a generic IP block from Faraday Technology, embedded in the
  Cortina Systems Gemini SoCs and other designs.

maintainers:
  - Linus Walleij <linus.walleij@linaro.org>
  - Andrew Jeffery <andrew@codeconstruct.com.au>

allOf:
  - if:
      properties:
        compatible:
          items:
            - const: cortina,gemini-timer
    then:
      required: [ syscon ]
  - if:
      properties:
        compatible:
          const: aspeed,ast2400-timer
    then:
      properties:
        interrupts:
          maxItems: 8
  - if:
      properties:
        compatible:
          const: aspeed,ast2600-timer
    then:
      properties:
        interrupts-extended:
          maxItems: 8

properties:
  compatible:
    oneOf:
      - const: faraday,fttmr010
      - items:
          - enum:
              - cortina,gemini-timer
              - moxa,moxart-timer
          - const: faraday,fttmr010
      - enum:
          - aspeed,ast2400-timer
          - aspeed,ast2500-timer
          - aspeed,ast2600-timer

  reg:
    maxItems: 1

  interrupts: true

  clocks:
    minItems: 1
    maxItems: 2

  clock-names:
    minItems: 1
    maxItems: 2
    anyOf:
      - enum:
          - EXTCLK
          - PCLK
    description: |
      Use EXTCLK for the external tick timer and PCLK for the peripheral clock.

  syscon:
    maxItems: 1
    description: |
      A phandle to the global Gemini system controller if the compatible type is
      "cortina,gemini-timer"

required:
  - compatible
  - reg
  - interrupts

additionalProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>
    timer@43000000 {
        compatible = "faraday,fttmr010";
        reg = <0x43000000 0x1000>;
        interrupts = <14 IRQ_TYPE_EDGE_FALLING>, /* Timer 1 */
               <15 IRQ_TYPE_EDGE_FALLING>, /* Timer 2 */
               <16 IRQ_TYPE_EDGE_FALLING>; /* Timer 3 */
        clocks = <&extclk>, <&pclk>;
        clock-names = "EXTCLK", "PCLK";
    };
