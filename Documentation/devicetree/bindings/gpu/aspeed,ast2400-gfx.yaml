# SPDX-License-Identifier: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/gpu/aspeed,ast2400-gfx.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Aspeed GFX display device

maintainers:
  - Andrew Jeffery <andrew@codeconstruct.com.au>

description: |
  The Aspeed BMC GFX device is a display controller separate to VGA from the
  host. A switch on the BMC side determines whether the DAC provides display
  output from the host VGA or BMC GFX controllers.

allOf:
  - $ref: /schemas/reserved-memory/memory-region.yaml#

properties:
  compatible:
    items:
      - enum:
          - aspeed,ast2400-gfx
          - aspeed,ast2500-gfx
      - const: syscon

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  clocks:
    maxItems: 1

  resets:
    maxItems: 1

additionalProperties: true

examples:
  - |
    #include <dt-bindings/clock/aspeed-clock.h>
    reserved-memory {
        gfx_memory: framebuffer {
            size = <0x01000000>;
            alignment = <0x01000000>;
            compatible = "shared-dma-pool";
            reusable;
        };
    };
    syscon: syscon@1e6e2000 {
        compatible = "aspeed,ast2500-scu", "syscon", "simple-mfd";
        reg = <0x1e6e2000 0x1a8>;
        ranges = <0 0x1e6e2000 0x1000>;
        #address-cells = <1>;
        #size-cells = <1>;
        #clock-cells = <1>;
        #reset-cells = <1>;
    };
    display@1e6e6000 {
        compatible = "aspeed,ast2500-gfx", "syscon";
        reg = <0x1e6e6000 0x1000>;
        reg-io-width = <4>;
        clocks = <&syscon ASPEED_CLK_GATE_D1CLK>;
        resets = <&syscon ASPEED_RESET_CRT1>;
        interrupts = <0x19>;
        memory-region = <&gfx_memory>;
    };
